function type(t){return t.USA=+t.USA,t.CANADA=+t.CANADA,t}function arcTween(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return arc(e(t))}}var width=500,height=500,radius=Math.min(width,height)/2,color=d3.scale.category20(),pie=d3.layout.pie().value(function(t){return t.USA}).sort(null),arc=d3.svg.arc().innerRadius(radius-100).outerRadius(radius-20),svg_pie=d3.select("#pie_chart_svg").append("g").attr("transform","translate("+width/2+","+height/2+")");d3.tsv("data_2.tsv",type,function(t,e){function r(){var t=this.value;clearTimeout(n),pie.value(function(e){return e[t]}),a=a.data(pie),a.transition().duration(750).attrTween("d",arcTween)}var a=svg_pie.datum(e).selectAll("path").data(pie).enter().append("path").attr("fill",function(t,e){return color(e)}).attr("d",arc).each(function(t){this._current=t});d3.selectAll("input").on("change",r);var n=setTimeout(function(){d3.select('input[value="CANADA"]').property("checked",!0).each(r)},2e3)});