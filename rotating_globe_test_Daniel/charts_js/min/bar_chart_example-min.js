var bardata=[];d3.tsv("data.tsv",function(t){for(key in t)bardata.push(t[key].value);var e={top:30,right:30,bottom:40,left:50},a=400-e.top-e.bottom,l=600-e.left-e.right,n=50,r=5,s,o=d3.scale.linear().domain([0,.33*bardata.length,.66*bardata.length,bardata.length]).range(["#B58929","#C61C6F","#268BD2","#85992C"]),i=d3.scale.linear().domain([0,d3.max(bardata)]).range([0,a]),d=d3.scale.ordinal().domain(d3.range(0,bardata.length)).rangeBands([0,l],.8,1),c=d3.select("body").append("div").style("position","absolute").style("padding","0 10px").style("background","white").style("opacity",0),p=d3.select("#chart").append("svg").style("background","#e7e0cb").attr("class","bar_chart").attr("width",l+e.left+e.right).attr("height",a+e.top+e.bottom).append("g").attr("transform","translate("+e.left+", "+e.top+")").style("overflow","visible").selectAll("rect").data(bardata).enter().append("rect").style("fill",function(t,e){return o(e)}).attr("width",d.rangeBand()).attr("x",function(t,e){return d(e)}).attr("height",0).attr("y",a).on("mouseover",function(t){c.transition().style("opacity",.9),c.html(t).style("left",d3.event.pageX-35+"px").style("top",d3.event.pageY-30+"px"),s=this.style.fill,d3.select(this).style("opacity",.5).style("fill","yellow")}).on("mouseout",function(t){d3.select(this).style("opacity",1).style("fill",s)});p.transition().attr("height",function(t){return i(t)}).attr("y",function(t){return a-i(t)}).delay(function(t,e){return 15*e}).duration(1e3).ease("elastic");var g=d3.scale.linear().domain([0,d3.max(bardata)]).range([a,0]),y=d3.svg.axis().scale(g).orient("left").ticks(10),f=d3.select("svg").append("g");y(f),f.attr("transform","translate("+e.left+", "+e.top+")"),f.selectAll("path").style({fill:"none",stroke:"#000"}),f.selectAll("line").style({stroke:"#000"});var h=d3.svg.axis().scale(d).orient("bottom").tickValues(d.domain().filter(function(t,e){return!(e%(bardata.length/5))})),u=d3.select("svg").append("g");h(u),u.attr("transform","translate("+e.left+", "+(a+e.top)+")"),u.selectAll("path").style({fill:"none",stroke:"#000"}),u.selectAll("line").style({stroke:"#000"})});